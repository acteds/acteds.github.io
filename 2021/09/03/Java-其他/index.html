<!DOCTYPE html><html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /><title>Java 其他 &mdash; 个人博客</title><link rel="stylesheet" href="/assets/vendor/primer-css/css/primer.css"><link rel="stylesheet" href="/assets/css/components/collection.css"><link rel="stylesheet" href="/assets/css/components/repo-card.css"><link rel="stylesheet" href="/assets/css/sections/repo-list.css"><link rel="stylesheet" href="/assets/css/components/boxed-group.css"><link rel="stylesheet" href="/assets/css/globals/common.css"><link rel="stylesheet" href="/assets/css/globals/responsive.css"><link rel="stylesheet" href="/assets/css/posts/index.css"><link rel="stylesheet" href="/assets/vendor/octicons/octicons/octicons.css"><link rel="stylesheet" href="/assets/css/highlight/monokai.sublime.css"><link rel="canonical" href="/2021/09/03/Java-%E5%85%B6%E4%BB%96/"><link rel="alternate" type="application/atom+xml" title="个人博客" href="/feed.xml"><link rel="shortcut icon" href="/favicon.ico"><meta property="og:title" content="Java 其他"><meta name="keywords" content="博客"><meta name="og:keywords" content="博客"><meta name="description" content="GUI"><meta name="og:description" content="GUI"><meta property="og:url" content="/2021/09/03/Java-%E5%85%B6%E4%BB%96/"><meta property="og:site_name" content="个人博客"><meta property="og:type" content="article"><meta property="og:locale" content="zh_CN" /><meta property="article:published_time" content="2021-09-03"> <script src="/assets/vendor/jquery/dist/jquery.min.js"></script> <script src="/assets/js/jquery-ui.js"></script> <script src="/assets/js/main.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-80669434-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-80669434-1'); </script></head><body class="" data-mz=""><header class="site-header"><div class="container"><h1><a href="/" title="个人博客"><span class="octicon octicon-mark-github"></span> 个人博客</a></h1><button class="collapsed mobile-visible" type="button" onclick="toggleMenu();"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button><nav class="site-header-nav" role="navigation"> <a href="/" class=" site-header-nav-item" target="" title="首页">首页</a> <a href="/categories/" class=" site-header-nav-item" target="" title="分类">分类</a> <a href="/wiki/" class=" site-header-nav-item" target="" title="维基">维基</a> <a href="/about/" class=" site-header-nav-item" target="" title="关于">关于</a></nav></div></header><section class="collection-head small geopattern" data-pattern-id="Java 其他"><div class="container"><div class="columns"><div class="column three-fourths"><div class="collection-title"><h1 class="collection-header">Java 其他</h1><div class="collection-info"> <span class="meta-info"> <span class="octicon octicon-calendar"></span> 2021/09/03 </span> <span class="meta-info"> <span class="octicon octicon-clock"></span> 共 7656 字，约 22 分钟 </span></div></div></div><div class="column one-fourth mobile-hidden"><div class="collection-title"></div></div></div></div></section><section class="container content"><div class="columns"><div class="column three-fourths" ><article class="article-content markdown-body"><h1 id="gui">GUI</h1><p><code class="language-plaintext highlighter-rouge">JFrame</code><br /> <strong>构造方法</strong></p><table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>JFrame()</td><td>构造一个初始时不可见的新窗体。</td></tr><tr><td>JFrame(GraphicsConfiguration gc)</td><td>以屏幕设备的指定 GraphicsConfiguration 和空白标题创建一个 Frame。</td></tr><tr><td>JFrame(String title)</td><td>创建一个新的、初始不可见的、具有指定标题的 Frame。</td></tr><tr><td>JFrame(String title, GraphicsConfiguration gc)</td><td>创建一个具有指定标题和指定屏幕设备的 GraphicsConfiguration 的 JFrame。</td></tr></tbody></table><p><strong>常用方法</strong></p><table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>add()</td><td>将组件添加到窗口</td></tr><tr><td>is/setVisible()</td><td>获取/设置窗体的可视状态。</td></tr><tr><td>get/setTitle()</td><td>获取/设置窗体的标题。</td></tr><tr><td>get/setState()</td><td>获取/设置窗体的的最小化,最大化等状态。</td></tr><tr><td>get/setLocation()</td><td>获取/设置窗体在屏幕上应当出现的位置。</td></tr><tr><td>get/setSize()</td><td>获取/设置窗体的大小。</td></tr><tr><td>setDefaultCloseOperation(int operation)</td><td>设置单击窗体上的关闭按钮时的默认操作。</td></tr><tr><td>getContentPane()</td><td>获取窗体的内容面板</td></tr></tbody></table><p><code class="language-plaintext highlighter-rouge">setDefaultCloseOperation</code><br /> <code class="language-plaintext highlighter-rouge">public void setDefaultCloseOperation(int operation)</code><br /> 设置用户在此窗体上发起”<code class="language-plaintext highlighter-rouge">close</code>“时默认执行的操作。必须指定以下选项之一：<br /> 值依次为<code class="language-plaintext highlighter-rouge">0-3</code><br /> <code class="language-plaintext highlighter-rouge">DO_NOTHING_ON_CLOSE</code>(在 WindowConstants 中定义)：不执行任何操作;要求程序在已注册的 <code class="language-plaintext highlighter-rouge">WindowListener</code> 对象的 <code class="language-plaintext highlighter-rouge">windowClosing</code> 方法中处理该操作。<br /> <code class="language-plaintext highlighter-rouge">HIDE_ON_CLOSE</code>(在 <code class="language-plaintext highlighter-rouge">WindowConstants</code> 中定义)：调用任意已注册的 <code class="language-plaintext highlighter-rouge">WindowListener</code> 对象后自动隐藏该窗体。<br /> <code class="language-plaintext highlighter-rouge">DISPOSE_ON_CLOSE</code>(在 <code class="language-plaintext highlighter-rouge">WindowConstants</code> 中定义)：调用任意已注册 <code class="language-plaintext highlighter-rouge">WindowListener</code> 的对象后自动隐藏并释放该窗体。<br /> <code class="language-plaintext highlighter-rouge">EXIT_ON_CLOSE</code>(在 <code class="language-plaintext highlighter-rouge">JFrame</code> 中定义)：使用 <code class="language-plaintext highlighter-rouge">System exit</code> 方法退出应用程序。仅在应用程序中使用。<br /> 默认情况下,该值被设置为 <code class="language-plaintext highlighter-rouge">HIDE_ON_CLOSE</code>。更改此属性的值将导致激发属性更改事件,其属性名称为 “<code class="language-plaintext highlighter-rouge">defaultCloseOperation</code>“。<br /> 注：当 Java 虚拟机 (VM) 中最后一个可显示窗口被释放后,虚拟机<strong>可能</strong>会终止。<br /> <code class="language-plaintext highlighter-rouge">frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</code></p><h1 id="网络">网络</h1><p>常见服务和对应端口号</p><table><thead><tr><th>端口</th><th>对应服务</th></tr></thead><tbody><tr><td>7</td><td>Echo服务器</td></tr><tr><td>21</td><td>Ftp</td></tr><tr><td>23</td><td>telnet</td></tr><tr><td>25</td><td>SMTP</td></tr><tr><td>79</td><td>Finger</td></tr><tr><td>80</td><td>HTTP</td></tr></tbody></table><h2 id="url类">URL类</h2><table><thead><tr><th>构造方法</th><th>说明</th></tr></thead><tbody><tr><td>public URL(String spec);</td><td>URL u1 =new URL(“http://home.netscape.com/home/”);</td></tr><tr><td>public URL(URL context, String spec);</td><td>URL u2=new URL(u1, “welcome.html”);</td></tr><tr><td>public URL(String protocol, String host, String file);</td><td>URL u3=new URL(“http”, “www.sun.com”,developers/index.html”);</td></tr><tr><td>public URL (String protocol, String host, int port, String file)</td><td>URL u4 = new URL(“http”, “www.sun.com”, 80,”developers/index.html” );</td></tr></tbody></table><h2 id="urlconnection类">URLConnection类</h2><p><code class="language-plaintext highlighter-rouge">Uonnection</code>类支持<code class="language-plaintext highlighter-rouge">URL</code>连接的输入/输出流方式的通信,并可以获得<code class="language-plaintext highlighter-rouge">URL</code>对象资源的相关信息。它是所有应用程序和<code class="language-plaintext highlighter-rouge">URL</code>连接通信类的父类。可以用它来输出、输入对象所表示的Intenet上的资源。<br /> 常用的成员方法：</p><table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>void setUseCaches(boolean uescaches)</td><td>设置是否允许使用高速缓冲存储器</td></tr><tr><td>object getContent()</td><td>获取当前URL连接的信息内容</td></tr><tr><td>String getContentType()</td><td>返回连接类型的头域值</td></tr><tr><td>int getContentLength()</td><td>返回当前连接长度的头域值</td></tr><tr><td>long getDate()</td><td>返回当前日期头域值</td></tr><tr><td>long getLastModified()</td><td>返回最后修改时间头域值</td></tr><tr><td>inputStream getInputStream()</td><td>返回连接的输入济</td></tr><tr><td>outputStream getOutputStream()</td><td>返回连接的输出流</td></tr></tbody></table><p>将baidu内容重定向到Demo.txt</p><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.aotmd.test</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.net.URLConnection</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.util.StringTokenizer</span><span class="o">;</span>  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">NoteTest</span> <span class="o">{</span>  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>  
        <span class="nc">FileOutputStream</span> <span class="n">fos</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>  
        <span class="nc">PrintStream</span> <span class="n">ps</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>  
        <span class="k">try</span> <span class="o">{</span>  
            <span class="n">fos</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileOutputStream</span><span class="o">(</span><span class="s">"Demo.txt"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span><span class="c1">//建立一个文件输出流,并将它的append标记设置为true  </span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>  
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>  
        <span class="o">}</span>  
        <span class="n">ps</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintStream</span><span class="o">(</span><span class="n">fos</span><span class="o">);</span><span class="c1">// 建立一个PrintStream对象,它将作为标准输出流  </span>
        <span class="nc">System</span><span class="o">.</span><span class="na">setOut</span><span class="o">(</span><span class="n">ps</span><span class="o">);</span><span class="c1">//将标准输出定向到PrintStream对象  </span>
        <span class="nc">URLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>  
        <span class="nc">String</span> <span class="n">nextLine</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>  
        <span class="nc">StringTokenizer</span> <span class="n">tokenizer</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>  
        <span class="no">URL</span> <span class="n">url2</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="s">"http://www.baidu.com"</span><span class="o">);</span>  
        <span class="n">conn</span> <span class="o">=</span> <span class="n">url2</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>  
        <span class="n">conn</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>  
        <span class="n">conn</span><span class="o">.</span><span class="na">connect</span><span class="o">();</span>  
        <span class="nc">BufferedReader</span> <span class="nc">Reader1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>  
        <span class="k">while</span> <span class="o">((</span><span class="n">nextLine</span> <span class="o">=</span> <span class="nc">Reader1</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>  
            <span class="n">tokenizer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringTokenizer</span><span class="o">(</span><span class="n">nextLine</span><span class="o">);</span>  
        <span class="k">while</span> <span class="o">(</span><span class="n">tokenizer</span><span class="o">.</span><span class="na">hasMoreTokens</span><span class="o">())</span> <span class="o">{</span>  
            <span class="nc">String</span> <span class="n">urlToken</span> <span class="o">=</span> <span class="n">tokenizer</span><span class="o">.</span><span class="na">nextToken</span><span class="o">();</span>  
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">urlToken</span><span class="o">);</span>  
        <span class="o">}</span>  
    <span class="o">}</span>  
<span class="o">}</span>
</code></pre></div></div><h2 id="socket概念">Socket概念</h2><p>两个Java应用程序可通过一个双向的网络通信连接实现<strong>数据交换</strong>,这个双向链路的一端称为一个<code class="language-plaintext highlighter-rouge">socket</code>.<code class="language-plaintext highlighter-rouge">socket</code>通常用来实现<code class="language-plaintext highlighter-rouge">client-server</code>连接。java.net包中定义的两个类<code class="language-plaintext highlighter-rouge">Socket</code>和<code class="language-plaintext highlighter-rouge">ServerSocket</code>,分别用来实现双向连接的<code class="language-plaintext highlighter-rouge">client</code>和<code class="language-plaintext highlighter-rouge">server</code>端.<br /> 套接字(<code class="language-plaintext highlighter-rouge">Socket</code>)：表示一个系统的IP地址和端口号的结合。<br /> <code class="language-plaintext highlighter-rouge">TCP/IP</code>连接的一个端点用来处理两个流对象<br /> 创建<code class="language-plaintext highlighter-rouge">TCP Socket</code>需要的四个信息：本地系统的<code class="language-plaintext highlighter-rouge">IP</code>本地应用程序使用的<code class="language-plaintext highlighter-rouge">TCP</code>端口号远程系统的<code class="language-plaintext highlighter-rouge">IP</code>远程应用程序相应的<code class="language-plaintext highlighter-rouge">TCP</code>端口号</p><h2 id="socket类">Socket类</h2><p><strong>Socket类构造器</strong></p><blockquote><p><code class="language-plaintext highlighter-rouge">Socket()</code><br /> <code class="language-plaintext highlighter-rouge">Socket(InetAddress address,int port)</code><br /> <code class="language-plaintext highlighter-rouge">Socket(InetAddress address,int port,InetAddress localAddr,int localPort)</code><br /> <code class="language-plaintext highlighter-rouge">Socket(String host,int port)</code><br /> <code class="language-plaintext highlighter-rouge">protected Socket(Socketlmpl impl)</code><br /> <code class="language-plaintext highlighter-rouge">Socket(String host,int port,InetAddress localAddr,int localPort)</code><br /> <code class="language-plaintext highlighter-rouge">Socket(InetAddress address, int port)</code><br /> <code class="language-plaintext highlighter-rouge">Socket(InetAddress address, int port,boolean stream);</code><br /> <code class="language-plaintext highlighter-rouge">Socket(String host, int port);</code><br /> <code class="language-plaintext highlighter-rouge">Socket(String host, int port, boolean stream);</code><br /> <code class="language-plaintext highlighter-rouge">ServerSocket(int port);</code><br /> <code class="language-plaintext highlighter-rouge">ServerSocket(int port, int count);</code></p></blockquote><p><code class="language-plaintext highlighter-rouge">Socket方法</code></p><blockquote><p><code class="language-plaintext highlighter-rouge">getlnputStream()</code><br /> <code class="language-plaintext highlighter-rouge">getOutputStream()</code><br /> <code class="language-plaintext highlighter-rouge">close()</code></p></blockquote><h2 id="serversocket类">ServerSocket类</h2><p>ServerSocket类用于侦听一个客户端的Socket连接,如果没有连接,它将一直等待。<br /> <strong>ServerSocket构造器</strong></p><table><thead><tr><th>构造方法</th><th>说明</th></tr></thead><tbody><tr><td>ServerSocket(int port)</td><td>用指定的端口<code class="language-plaintext highlighter-rouge">port</code>来创建一个侦听<code class="language-plaintext highlighter-rouge">Socket</code></td></tr><tr><td>ServerSocket(int port,int backlog)</td><td>加上一个用来改变连接队列长度的参数<code class="language-plaintext highlighter-rouge">backlog</code>.</td></tr><tr><td>ServerSocket(int port,int backlog,lnetAddress localAddr)</td><td>在机器存在多个<code class="language-plaintext highlighter-rouge">IP</code>地址的情况下,允许通过<code class="language-plaintext highlighter-rouge">localAddr</code>这个参数来指定侦听的<code class="language-plaintext highlighter-rouge">IP</code>地址。</td></tr></tbody></table><p><strong>ServerSocket方法</strong><br /> <code class="language-plaintext highlighter-rouge">Socket accept()</code><br /> <code class="language-plaintext highlighter-rouge">close()</code></p><h2 id="示例">示例</h2><p>服务端程序编写</p><ol><li>调用<code class="language-plaintext highlighter-rouge">ServerSocket(int port)</code>创建一个服务端套接字，并绑定到指定端口上；</li><li>调用<code class="language-plaintext highlighter-rouge">socket</code>类的<code class="language-plaintext highlighter-rouge">getOutputStream()</code>和<code class="language-plaintext highlighter-rouge">getlnputStream()</code>获取输入流和输出流</li><li>关闭<code class="language-plaintext highlighter-rouge">socket</code>；</li></ol><p>客户端程序编写</p><ol><li>调用<code class="language-plaintext highlighter-rouge">Socket()</code>创建流套接字，并链接到服务端；</li><li>调用<code class="language-plaintext highlighter-rouge">accept()</code>监听链接请求，如果客户端请求链接，则接受链接，返回通信套接字；</li><li>调用<code class="language-plaintext highlighter-rouge">socket</code>类的<code class="language-plaintext highlighter-rouge">getOutputStream()</code>和<code class="language-plaintext highlighter-rouge">getInputStream()</code>获取输入流和输出流；</li><li>关闭<code class="language-plaintext highlighter-rouge">socket</code>；</li></ol><p>客户端Socket的建立</p><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.aotmd.test</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.net.ServerSocket</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.net.Socket</span><span class="o">;</span>  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">NoteTest</span> <span class="o">{</span>  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>  
        <span class="k">try</span> <span class="o">{</span>  
            <span class="nd">@SuppressWarnings</span><span class="o">({</span><span class="s">"unused"</span><span class="o">,</span> <span class="s">"resource"</span><span class="o">})</span>  
            <span class="nc">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Socket</span><span class="o">(</span><span class="s">"127.0.0.1"</span><span class="o">,</span> <span class="mi">2000</span><span class="o">);</span>  
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>  
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error:"</span> <span class="o">+</span> <span class="n">e</span><span class="o">);</span>  
        <span class="o">}</span>  
    <span class="o">}</span>  
<span class="o">}</span>
</code></pre></div></div><p>服务器端Socket的建立</p><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.aotmd.test</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.net.ServerSocket</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.net.Socket</span><span class="o">;</span>  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">NoteTest</span> <span class="o">{</span>  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>  
        <span class="nc">ServerSocket</span> <span class="n">server</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>  
        <span class="k">try</span> <span class="o">{</span>  
            <span class="n">server</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ServerSocket</span><span class="o">(</span><span class="mi">2000</span><span class="o">);</span>  
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>  
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"can not listen to :"</span> <span class="o">+</span> <span class="n">e</span><span class="o">);</span>  
        <span class="o">}</span>  
        <span class="nc">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>  
        <span class="k">try</span> <span class="o">{</span>  
            <span class="n">socket</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="na">accept</span><span class="o">();</span>  
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>  
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error:"</span> <span class="o">+</span> <span class="n">e</span><span class="o">);</span>  
        <span class="o">}</span>  
    <span class="o">}</span>  
<span class="o">}</span>
</code></pre></div></div><p>打开输入/出流</p><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">PrintStream</span> <span class="n">os</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintStream</span><span class="o">(</span><span class="k">new</span> <span class="nc">BufferedOutputStream</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">());</span>  
<span class="nc">DataInputStream</span> <span class="n">is</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DataInputStream</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">());</span>
</code></pre></div></div><p>关闭Socket</p><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">os</span><span class="o">.</span><span class="na">close</span><span class="o">();</span><span class="n">is</span><span class="o">.</span><span class="na">close</span><span class="o">();</span><span class="n">socket</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</code></pre></div></div><p>简单的<code class="language-plaintext highlighter-rouge">client</code>/<code class="language-plaintext highlighter-rouge">server</code>程序</p><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.aotmd.test</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.net.ConnectException</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.net.ServerSocket</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.net.Socket</span><span class="o">;</span>  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">NoteTest</span> <span class="o">{</span>  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>  
    <span class="o">}</span>  
<span class="o">}</span>  
<span class="kd">class</span> <span class="nc">Server1</span> <span class="o">{</span>  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>  
        <span class="k">try</span> <span class="o">{</span>  
            <span class="nd">@SuppressWarnings</span><span class="o">(</span><span class="s">"resource"</span><span class="o">)</span>  
            <span class="nc">ServerSocket</span> <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ServerSocket</span><span class="o">(</span><span class="mi">8888</span><span class="o">);</span>  
            <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>  
                <span class="nc">Socket</span> <span class="n">s1</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">accept</span><span class="o">();</span>  
                <span class="nc">OutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">();</span>  
                <span class="nc">DataOutputStream</span> <span class="n">dos</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DataOutputStream</span><span class="o">(</span><span class="n">os</span><span class="o">);</span>  
                <span class="n">dos</span><span class="o">.</span><span class="na">writeUTF</span><span class="o">(</span><span class="s">"Hello,"</span> <span class="o">+</span> <span class="n">s1</span><span class="o">.</span><span class="na">getInetAddress</span><span class="o">()</span> <span class="o">+</span> <span class="s">"port#"</span> <span class="o">+</span> <span class="n">s1</span><span class="o">.</span><span class="na">getPort</span><span class="o">()</span> <span class="o">+</span> <span class="s">"bye-bye!"</span><span class="o">);</span>  
                <span class="n">dos</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>  
                <span class="n">s1</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>  
                <span class="c1">// s.close();  </span>
            <span class="o">}</span>  
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>  
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>  
        <span class="o">}</span>  
    <span class="o">}</span>  
<span class="o">}</span>  
<span class="kd">class</span> <span class="nc">Client1</span> <span class="o">{</span>  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>  
        <span class="k">try</span> <span class="o">{</span>  
            <span class="nc">Socket</span> <span class="n">s1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Socket</span><span class="o">(</span><span class="s">"127.0.0.1"</span><span class="o">,</span> <span class="mi">8888</span><span class="o">);</span>  
            <span class="nc">InputStream</span> <span class="n">is</span> <span class="o">=</span><span class="n">s1</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">();</span>  
            <span class="nc">DataInputStream</span> <span class="n">dis</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DataInputStream</span><span class="o">(</span><span class="n">is</span><span class="o">);</span>  
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">dis</span><span class="o">.</span><span class="na">readUTF</span><span class="o">());</span>  
            <span class="n">dis</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>  
            <span class="n">s1</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>  
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ConnectException</span> <span class="n">connExc</span><span class="o">)</span> <span class="o">{</span>  
            <span class="nc">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"服务器连接失败！"</span><span class="o">);</span>  
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>  
        <span class="o">}</span>  
    <span class="o">}</span>  
<span class="o">}</span>
</code></pre></div></div><p>先运行服务器,然后运行客户端,会收到服务器发的信息.<br /> 例子二</p><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.aotmd.test</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.io.PrintStream</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.net.ServerSocket</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.net.Socket</span><span class="o">;</span>  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">NoteTest</span> <span class="o">{</span>  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>  
    <span class="o">}</span>  
<span class="o">}</span>  
<span class="kd">class</span> <span class="nc">Server1</span> <span class="o">{</span>  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>  
        <span class="nc">ServerSocket</span> <span class="n">server</span><span class="o">;</span>  
        <span class="k">try</span> <span class="o">{</span>  
            <span class="n">server</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ServerSocket</span><span class="o">(</span><span class="mi">1234</span><span class="o">);</span>  
            <span class="nc">Socket</span> <span class="n">sk</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="na">accept</span><span class="o">();</span>  
            <span class="nc">BufferedReader</span> <span class="n">br</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">sk</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>  
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">());</span>  
            <span class="n">br</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>  
            <span class="n">server</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>  
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>  
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>  
        <span class="o">}</span>  
    <span class="o">}</span>  
<span class="o">}</span>  
<span class="kd">class</span> <span class="nc">Client1</span> <span class="o">{</span>  
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>  
        <span class="nc">Socket</span> <span class="n">client</span><span class="o">;</span>  
        <span class="nc">PrintStream</span> <span class="n">ps</span><span class="o">;</span>  
        <span class="k">try</span> <span class="o">{</span>  
            <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Socket</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">1234</span><span class="o">);</span>  
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"连接成功！"</span><span class="o">);</span>  
            <span class="n">ps</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintStream</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">());</span>  
            <span class="n">ps</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"客户端回显的对话"</span><span class="o">);</span>  
            <span class="n">client</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>  
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>  
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>  
        <span class="o">}</span>  
    <span class="o">}</span>  
<span class="o">}</span>
</code></pre></div></div><h2 id="url与socket通信的区别">URL与Socket通信的区别</h2><p>利用<code class="language-plaintext highlighter-rouge">URL</code>进行通信与利用<code class="language-plaintext highlighter-rouge">socket</code>进行通信有许多相似之处。它们都是利用建立连接、获取流来进行通信。它们的区别在：<br /> 利用<code class="language-plaintext highlighter-rouge">socket</code>进行通信时，在服务器端运行一个<code class="language-plaintext highlighter-rouge">socket</code>通信程序。服务器端不停地监听某个端口，等待客户的连接申请，接到申请后建立连接并进行通信，所以，在<code class="language-plaintext highlighter-rouge">socket</code>通信方式中，服务器是主动等待连接通信的到来。<br /> 利用<code class="language-plaintext highlighter-rouge">URL</code>进行通信时，在服务器端常驻一个<code class="language-plaintext highlighter-rouge">CGI</code>程序，但它一直处于休眠状态。只有在客户端要求建立连接时才被激活，然后点用户进行通信。所以，在<code class="language-plaintext highlighter-rouge">URL</code>通信方式中，服务器是被动等待连接通信的到来。</p><h2 id="udp通信">UDP通信</h2><p>在基于<code class="language-plaintext highlighter-rouge">TCP/IP</code>网络体系结构的网络中主要使用<code class="language-plaintext highlighter-rouge">TCP</code>和<code class="language-plaintext highlighter-rouge">UDP</code>（<code class="language-plaintext highlighter-rouge">UserDatagramProtocol</code>，用户数据报协议）来实现数据通信。<code class="language-plaintext highlighter-rouge">TCP</code>是一种面向连接可靠的传输，它能确保数据传送正确到达目的端；而<code class="language-plaintext highlighter-rouge">UDP</code>则是一种面向无连接的不可靠传输协议，它<strong>不能</strong>确保数据能正确到达目的端，但是它能提高网络通信的效率。<br /> <strong>UDP Socket特性</strong><br /> 通过UDP的UDP端口来实现UDP协议的网络通信。<br /> 其工作过程如下：<br /> 创建一个适当的要发送且注明收发人地址数据报；<br /> 为一个特定的应用程序建立一个传输端口来传送和接收数据包；<br /> 将数据报插入一个传输端口中进行传输；<br /> 等待接收来自于传输端口的一个数据报；<br /> 解码数据报以解开消息、接收者和其它信息；<br /> <strong>Java UDP类</strong><br /> <code class="language-plaintext highlighter-rouge">DatagramSocket</code><br /> 用于接收和发送<code class="language-plaintext highlighter-rouge">UDP</code>的<code class="language-plaintext highlighter-rouge">Socket</code>实例。该类有3个构造函数：<br /> <code class="language-plaintext highlighter-rouge">DatagramSocket()</code>：通常用于客户端编程，它并没有特定监听的端囗，仅仅使用一个临时的。程序会让操作系统分配一个可用的端口。（使用这个构造方法时，系统会分配给他一个空闲的端口，但是也可以自己指定一个）<br /> <code class="language-plaintext highlighter-rouge">DatagramSocket(int port)</code>：创建实例，并固定监听<code class="language-plaintext highlighter-rouge">Port</code>端口的报文。通常用于服务端<br /> <code class="language-plaintext highlighter-rouge">DatagramSocket(int port,InetAddress localAddr)</code>：这是个非常有用的构建器，当一台机器拥有多于一个IP地址的时候，由它创建的实例仅仅接收来自<code class="language-plaintext highlighter-rouge">LocalAddr</code>的报文。</p><div style="margin-top:2em;padding:0 1.5em;border:1px solid #d3d3d3;background-color:#deebf7"><h3>文档信息</h3><ul><li>本文作者：<a href="" target="_blank">acteds</a></li><li>本文链接：<a href="/2021/09/03/Java-%E5%85%B6%E4%BB%96/" target="_blank">https://acteds.github.io/2021/09/03/Java-%E5%85%B6%E4%BB%96/</a></li><li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank">创意共享3.0许可证</a>）</li></ul></div></article><div class="share"></div><div class="comment"> <script src="https://beaudar.lipk.org/client.js" repo="mzlogin/blog-comments" issue-term="title" label="gitment" theme="github-light" comment-order="desc" input-position="top" crossorigin="anonymous" async> </script></div></div><div class="column one-fourth"><h3>Search</h3><div id="site_search"> <input style="width:96%" type="text" id="search_box" placeholder="Search"></div><ul id="search_results" style="font-size:14px;list-style-type:none;padding-top:10px;padding-left:10px;"></ul><script src="/assets/js/simple-jekyll-search.min.js"></script> <script type="text/javascript"> SimpleJekyllSearch({ searchInput: document.getElementById('search_box'), resultsContainer: document.getElementById('search_results'), json: '/assets/search_data.json?v=1713750782', searchResultTemplate: '<li><a href="{url}" title="{title}">{title}</a></li>', noResultsText: 'No results found', limit: 10, fuzzy: false, exclude: ['Welcome'] }) </script><h3 class="post-directory-title mobile-hidden">Table of Contents</h3><div id="post-directory-module" class="mobile-hidden"><section class="post-directory"><dl></dl></section></div><script src="/assets/js/jquery.toc.js"></script></div></div></section><footer class="container"><div class="site-footer" role="contentinfo"><div class="copyright left mobile-block"> © 2024 <span title="acteds">acteds</span> <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a></div><ul class="site-footer-links right mobile-hidden"><li> <a href="javascript:window.scrollTo(0,0)" >TOP</a></li></ul><a href="https://github.com/acteds/acteds.github.io" target="_blank" aria-label="view source code"> <span class="mega-octicon octicon-mark-github" title="GitHub"></span> </a><ul class="site-footer-links mobile-hidden"><li> <a href="/" title="首页" target="">首页</a></li><li> <a href="/categories/" title="分类" target="">分类</a></li><li> <a href="/wiki/" title="维基" target="">维基</a></li><li> <a href="/about/" title="关于" target="">关于</a></li><li><a href="/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></li></ul></div></footer><div class="tools-wrapper"> <a class="gotop" href="#" title="回到顶部"><span class="octicon octicon-arrow-up"></span></a></div><script src="/assets/js/geopattern.js"></script> <script> jQuery(document).ready(function($) { $('.geopattern').each(function(){ $(this).geopattern($(this).data('pattern-id')); }); /* hljs.initHighlightingOnLoad(); */ }); </script></body></html>
