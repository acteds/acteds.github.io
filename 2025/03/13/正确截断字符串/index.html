<!DOCTYPE html><html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /><title>æ­£ç¡®æˆªæ–­å­—ç¬¦ä¸² &mdash; ä¸ªäººåšå®¢</title><link rel="stylesheet" href="/assets/vendor/primer-css/css/primer.css"><link rel="stylesheet" href="/assets/css/components/collection.css"><link rel="stylesheet" href="/assets/css/components/repo-card.css"><link rel="stylesheet" href="/assets/css/sections/repo-list.css"><link rel="stylesheet" href="/assets/css/components/boxed-group.css"><link rel="stylesheet" href="/assets/css/globals/common.css"><link rel="stylesheet" href="/assets/css/globals/responsive.css"><link rel="stylesheet" href="/assets/css/posts/index.css"><link rel="stylesheet" href="/assets/vendor/octicons/octicons/octicons.css"><link rel="stylesheet" href="/assets/css/highlight/monokai.sublime.css"><link rel="canonical" href="/2025/03/13/%E6%AD%A3%E7%A1%AE%E6%88%AA%E6%96%AD%E5%AD%97%E7%AC%A6%E4%B8%B2/"><link rel="alternate" type="application/atom+xml" title="ä¸ªäººåšå®¢" href="/feed.xml"><link rel="shortcut icon" href="/favicon.ico"><meta property="og:title" content="æ­£ç¡®æˆªæ–­å­—ç¬¦ä¸²"><meta name="keywords" content="Chrome,JavaScript"><meta name="og:keywords" content="Chrome,JavaScript"><meta name="description" content="å¼•è¨€"><meta name="og:description" content="å¼•è¨€"><meta property="og:url" content="/2025/03/13/%E6%AD%A3%E7%A1%AE%E6%88%AA%E6%96%AD%E5%AD%97%E7%AC%A6%E4%B8%B2/"><meta property="og:site_name" content="ä¸ªäººåšå®¢"><meta property="og:type" content="article"><meta property="og:locale" content="zh_CN" /><meta property="article:published_time" content="2025-03-13"> <script src="/assets/vendor/jquery/dist/jquery.min.js"></script> <script src="/assets/js/jquery-ui.js"></script> <script src="/assets/js/main.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-80669434-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-80669434-1'); </script></head><body class="" data-mz=""><header class="site-header"><div class="container"><h1><a href="/" title="ä¸ªäººåšå®¢"><span class="octicon octicon-mark-github"></span> ä¸ªäººåšå®¢</a></h1><button class="collapsed mobile-visible" type="button" onclick="toggleMenu();"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button><nav class="site-header-nav" role="navigation"> <a href="/" class=" site-header-nav-item" target="" title="é¦–é¡µ">é¦–é¡µ</a> <a href="/categories/" class=" site-header-nav-item" target="" title="åˆ†ç±»">åˆ†ç±»</a> <a href="/wiki/" class=" site-header-nav-item" target="" title="ç»´åŸº">ç»´åŸº</a> <a href="/about/" class=" site-header-nav-item" target="" title="å…³äº">å…³äº</a></nav></div></header><section class="collection-head small geopattern" data-pattern-id="æ­£ç¡®æˆªæ–­å­—ç¬¦ä¸²"><div class="container"><div class="columns"><div class="column three-fourths"><div class="collection-title"><h1 class="collection-header">æ­£ç¡®æˆªæ–­å­—ç¬¦ä¸²</h1><div class="collection-info"> <span class="meta-info"> <span class="octicon octicon-calendar"></span> 2025/03/13 </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="/categories/#Chrome" title="Chrome">Chrome</a> </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="/categories/#JavaScript" title="JavaScript">JavaScript</a> </span> <span class="meta-info"> <span class="octicon octicon-clock"></span> å…± 3269 å­—ï¼Œçº¦ 10 åˆ†é’Ÿ </span></div></div></div><div class="column one-fourth mobile-hidden"><div class="collection-title"></div></div></div></div></section><section class="container content"><div class="columns"><div class="column three-fourths" ><article class="article-content markdown-body"><h1 id="å¼•è¨€">å¼•è¨€</h1><p>åœ¨JavaScriptä¸­æˆªå–å­—ç¬¦ä¸²æ—¶ï¼Œç¢°åˆ°ç‰¹æ®Šç¼–ç çš„å­—ç¬¦ï¼Œæˆªæ–­å¯èƒ½å‡ºç°ä¹±ç ã€‚åˆ†è¯æ–¹æ³•ã€‚</p><h1 id="javascript">JavaScript</h1><h2 id="å­—ç¬¦ä¸²æˆªæ–­">å­—ç¬¦ä¸²æˆªæ–­</h2><p>åœ¨ JavaScript ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">slice()</code> æˆ– <code class="language-plaintext highlighter-rouge">substring()</code> æ¥æˆªå–å­—ç¬¦ä¸²çš„å‰ 10 ä¸ªå­—ç¬¦ã€‚ä¾‹å¦‚ï¼š</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">str</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•å­—ç¬¦ä¸²ï¼Œç”¨äºæ¼”ç¤ºæˆªæ–­</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">truncatedStr</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span> <span class="c1">// æˆªå–å‰10ä¸ªå­—ç¬¦</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">truncatedStr</span><span class="p">);</span>
</code></pre></div></div><p>å¦‚æœå¸Œæœ›ç¡®ä¿æˆªæ–­ä¸ä¼šæ‹†åˆ† UTF-16 ä»£ç†å¯¹ï¼ˆå¦‚æŸäº› emojiï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">Array.from()</code> å¤„ç†ï¼š</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">str</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•å­—ç¬¦ä¸²ğŸ˜Šï¼Œç”¨äºæ¼”ç¤ºæˆªæ–­</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">truncatedStr</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">str</span><span class="p">).</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">truncatedStr</span><span class="p">);</span>
</code></pre></div></div><p>è¿™æ ·å¯ä»¥ç¡®ä¿ä¸ä¼šæˆªæ–­åŠä¸ª emoji æˆ–ç‰¹æ®Šå­—ç¬¦ã€‚</p><h3 id="emoji-æˆªæ–­çš„åŸç†">Emoji æˆªæ–­çš„åŸç†</h3><p>åœ¨ JavaScript ä¸­ï¼Œå­—ç¬¦ä¸²åŸºäº UTF-16 ç¼–ç ï¼Œè€Œ emoji å¯èƒ½ç”±å¤šä¸ª UTF-16 ç å…ƒï¼ˆcode unitï¼‰ç»„æˆï¼Œå¯¼è‡´æ™®é€šçš„ <code class="language-plaintext highlighter-rouge">slice()</code> æˆ– <code class="language-plaintext highlighter-rouge">substring()</code> å¯èƒ½ä¼šæˆªæ–­ä¸€ä¸ª emojiï¼Œå¯¼è‡´æ˜¾ç¤ºå¼‚å¸¸ã€‚</p><p>UTF-16 ä»£ç†å¯¹</p><ul><li>å¤§éƒ¨åˆ†æ™®é€šå­—ç¬¦ï¼ˆå¦‚è‹±æ–‡å­—æ¯ã€æ±‰å­—ï¼‰åœ¨ UTF-16 ä¸­å  1 ä¸ªç å…ƒï¼ˆ16 ä½ï¼‰ã€‚</li><li>æŸäº›ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚ emojiã€æŸäº›ç½•è§æ±‰å­—ï¼‰æ˜¯ä»£ç†å¯¹ï¼ˆSurrogate Pairï¼‰ï¼Œéœ€è¦ 2 ä¸ªç å…ƒï¼ˆ32 ä½ï¼‰è¡¨ç¤ºã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">str</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Hello ğŸ˜Š World</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">str</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span> <span class="c1">// 14ï¼ˆé•¿åº¦ä¸ç­‰äºå­—ç¬¦æ•°ï¼‰</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">str</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">));</span> <span class="c1">// "Hello ï¿½"</span>
</code></pre></div></div><p>ä¸Šé¢çš„ä»£ç é”™è¯¯åœ°æˆªæ–­äº† <code class="language-plaintext highlighter-rouge">ğŸ˜Š</code>ï¼Œå¯¼è‡´è¾“å‡ºä¹±ç  <code class="language-plaintext highlighter-rouge">ï¿½</code>ã€‚</p><hr /><p>ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">Array.from()</code> å¤„ç† emoji</p><p><code class="language-plaintext highlighter-rouge">Array.from(str)</code> èƒ½æ­£ç¡®è§£æå­—ç¬¦ï¼ŒåŒ…æ‹¬ä»£ç†å¯¹ï¼š</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">str</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Hello ğŸ˜Š World</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">truncatedStr</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">str</span><span class="p">).</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">truncatedStr</span><span class="p">);</span> <span class="c1">// "Hello ğŸ˜Š"</span>
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Array.from(str)</code> èƒ½å°†å­—ç¬¦ä¸²æ‹†åˆ†æˆæ­£ç¡®çš„ Unicode ç ç‚¹ï¼Œä¸ä¼šé”™è¯¯åœ°æ‹†å¼€ emojiã€‚</p><p>ä¹Ÿå¯ä»¥ç”¨ <strong>æ‰©å±•è¿ç®—ç¬¦ <code class="language-plaintext highlighter-rouge">...</code></strong> æ¥æ­£ç¡®æ‹†åˆ†å­—ç¬¦ä¸²ï¼š</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">str</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Hello ğŸ˜Š World</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">truncatedStr</span> <span class="o">=</span> <span class="p">[...</span><span class="nx">str</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">truncatedStr</span><span class="p">);</span> <span class="c1">// "Hello ğŸ˜Š"</span>
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">[...str]</code> çš„ä½œç”¨å’Œ <code class="language-plaintext highlighter-rouge">Array.from(str)</code> ä¸€æ ·ï¼Œéƒ½ä¼šæŒ‰<strong>å®Œæ•´çš„ Unicode ç ç‚¹</strong>æ‹†åˆ†å­—ç¬¦ä¸²ã€‚</p><hr /><p>ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">Intl.Segmenter</code>ï¼ˆæ›´é«˜çº§çš„åˆ†è¯æ–¹å¼ï¼‰</p><p>å¦‚æœè¦ç¡®ä¿æŒ‰ç…§å¯è§†å­—ç¬¦ï¼ˆgraphemeï¼‰æ‹†åˆ†ï¼Œå¯ä»¥ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">Intl.Segmenter</code>ï¼š</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">segmenter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Intl</span><span class="p">.</span><span class="nx">Segmenter</span><span class="p">(</span><span class="dl">'</span><span class="s1">en</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">granularity</span><span class="p">:</span> <span class="dl">'</span><span class="s1">grapheme</span><span class="dl">'</span> <span class="p">});</span>
<span class="kd">let</span> <span class="nx">segments</span> <span class="o">=</span> <span class="p">[...</span><span class="nx">segmenter</span><span class="p">.</span><span class="nx">segment</span><span class="p">(</span><span class="dl">"</span><span class="s2">Hello ğŸ˜Š World</span><span class="dl">"</span><span class="p">)].</span><span class="nx">map</span><span class="p">(</span><span class="nx">s</span> <span class="o">=&gt;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">segment</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">truncatedStr</span> <span class="o">=</span> <span class="nx">segments</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">truncatedStr</span><span class="p">);</span> <span class="c1">// "Hello ğŸ˜Š"</span>
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Intl.Segmenter</code> èƒ½è¯†åˆ«å¤æ‚çš„ç»„åˆå­—ç¬¦ï¼Œå¦‚å¸¦å˜éŸ³ç¬¦çš„å­—æ¯ã€è”åˆ emoji ç­‰ã€‚</p><p>å¦‚æœä½ éœ€è¦<strong>æŒ‰å•è¯</strong>æˆ–<strong>æŒ‰å¥å­</strong>æˆªæ–­ï¼Œè€Œä¸ä»…ä»…æ˜¯æŒ‰å­—ç¬¦æ•°æˆªæ–­ï¼š</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">segmenter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Intl</span><span class="p">.</span><span class="nx">Segmenter</span><span class="p">(</span><span class="dl">'</span><span class="s1">en</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">granularity</span><span class="p">:</span> <span class="dl">'</span><span class="s1">word</span><span class="dl">'</span> <span class="p">});</span>
<span class="kd">let</span> <span class="nx">segments</span> <span class="o">=</span> <span class="p">[...</span><span class="nx">segmenter</span><span class="p">.</span><span class="nx">segment</span><span class="p">(</span><span class="dl">"</span><span class="s2">Hello ğŸ˜Š World</span><span class="dl">"</span><span class="p">)].</span><span class="nx">map</span><span class="p">(</span><span class="nx">s</span> <span class="o">=&gt;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">segment</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">truncatedStr</span> <span class="o">=</span> <span class="nx">segments</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="dl">'</span><span class="s1"> </span><span class="dl">'</span><span class="p">);</span> <span class="c1">// å–å‰ 2 ä¸ªå•è¯</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">truncatedStr</span><span class="p">);</span> <span class="c1">// "Hello ğŸ˜Š"</span>
</code></pre></div></div><p>è¿™å¯ä»¥ç¡®ä¿<strong>ä¸æŠŠä¸€ä¸ªå®Œæ•´çš„å•è¯æˆ– emoji ç»„åˆæ‹†å¼€</strong>ï¼Œæ¯”å¦‚ <code class="language-plaintext highlighter-rouge">"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦"</code> è¿™ç§å®¶æ— emojiï¼Œå®ƒå…¶å®ç”±å¤šä¸ª Unicode ç ç‚¹ç»„æˆã€‚</p><hr /><p><strong>Node.js çš„ <code class="language-plaintext highlighter-rouge">Buffer</code> å¤„ç†æ–¹å¼</strong></p><p>å¦‚æœä½ çš„ JavaScript ä»£ç è·‘åœ¨ Node.js ä¸Šï¼Œä¹Ÿå¯ä»¥ç”¨ <code class="language-plaintext highlighter-rouge">Buffer</code> å¤„ç†ï¼š</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">str</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Hello ğŸ˜Š World</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">buf</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="dl">'</span><span class="s1">utf-8</span><span class="dl">'</span><span class="p">);</span> 
<span class="kd">let</span> <span class="nx">truncatedBuf</span> <span class="o">=</span> <span class="nx">buf</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">truncatedBuf</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span> 
</code></pre></div></div><p>ä½† <code class="language-plaintext highlighter-rouge">Buffer</code> å¤„ç†çš„æ˜¯<strong>å­—èŠ‚ï¼ˆbyteï¼‰ï¼Œè€Œä¸æ˜¯å­—ç¬¦ï¼ˆcharï¼‰</strong>ï¼Œå¯èƒ½ä»ç„¶ä¼šæˆªæ–­ emojiï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•ä¸å¤ªæ¨èã€‚</p><hr /><p><strong>æ€»ç»“</strong></p><table><thead><tr><th>æ–¹å¼</th><th>æ˜¯å¦æ¨è</th><th>é€‚ç”¨åœºæ™¯</th><th>å…¼å®¹æ€§</th></tr></thead><tbody><tr><td><code class="language-plaintext highlighter-rouge">slice(0, 10)</code></td><td>âŒ å¯èƒ½æˆªæ–­ emoji</td><td>ä»…é€‚ç”¨äºæ–°ç‰ˆ Chrome</td><td>Chrome 117+</td></tr><tr><td><code class="language-plaintext highlighter-rouge">Array.from(str).slice(0, 10).join('')</code></td><td>âœ… æ¨è</td><td>å¤„ç† emojiï¼Œä¿è¯è·¨æµè§ˆå™¨å…¼å®¹</td><td>å…¼å®¹æ‰€æœ‰ç°ä»£æµè§ˆå™¨</td></tr><tr><td><code class="language-plaintext highlighter-rouge">[...str].slice(0, 10).join('')</code></td><td>âœ… æ¨è</td><td>å’Œ <code class="language-plaintext highlighter-rouge">Array.from()</code> ç±»ä¼¼ï¼Œè¯­æ³•æ›´ç®€æ´</td><td>å…¼å®¹æ‰€æœ‰ç°ä»£æµè§ˆå™¨</td></tr><tr><td><code class="language-plaintext highlighter-rouge">Intl.Segmenter</code></td><td>âœ… é«˜çº§æ¨è</td><td>éœ€è¦æŒ‰<strong>å•è¯</strong>æˆ–<strong>å¥å­</strong>æˆªå–</td><td>ç°ä»£æµè§ˆå™¨ï¼ˆä¸å…¼å®¹ Node.jsï¼‰</td></tr><tr><td><code class="language-plaintext highlighter-rouge">Buffer.from(str, 'utf-8')</code></td><td>âš ï¸ æ…ç”¨</td><td>Node.js å¤„ç†å­—ç¬¦ä¸²</td><td>å¯èƒ½ä»ä¼šæˆªæ–­ emoji</td></tr></tbody></table><p>å¦‚æœä»£ç éœ€è¦<strong>å…¼å®¹æ‰€æœ‰æµè§ˆå™¨å’Œç¯å¢ƒ</strong>ï¼Œæœ€ä½³é€‰æ‹©æ˜¯ï¼š</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">truncatedStr</span> <span class="o">=</span> <span class="p">[...</span><span class="nx">str</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
</code></pre></div></div><p>å¦‚æœéœ€è¦æ›´æ™ºèƒ½çš„<strong>æŒ‰å•è¯æˆ–å¥å­</strong>æˆªå–ï¼Œå»ºè®®ï¼š</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">segmenter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Intl</span><span class="p">.</span><span class="nx">Segmenter</span><span class="p">(</span><span class="dl">'</span><span class="s1">en</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">granularity</span><span class="p">:</span> <span class="dl">'</span><span class="s1">word</span><span class="dl">'</span> <span class="p">});</span>
<span class="kd">let</span> <span class="nx">truncatedStr</span> <span class="o">=</span> <span class="p">[...</span><span class="nx">segmenter</span><span class="p">.</span><span class="nx">segment</span><span class="p">(</span><span class="nx">str</span><span class="p">)].</span><span class="nx">map</span><span class="p">(</span><span class="nx">s</span> <span class="o">=&gt;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">segment</span><span class="p">).</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
</code></pre></div></div><p>å¦‚æœåªåœ¨<strong>æ–°ç‰ˆ Chrome</strong> è¿è¡Œï¼Œ<code class="language-plaintext highlighter-rouge">slice()</code> ä¹Ÿå¯ä»¥ç”¨äº†ï¼Œä½†<strong>å…¶ä»–æµè§ˆå™¨ï¼ˆå¦‚ Safariï¼‰å¯èƒ½ä»æœ‰é—®é¢˜</strong>ã€‚</p><h3 id="chrome-æ–°ç‰ˆ-vs-æ—§ç‰ˆè¡Œä¸º">Chrome æ–°ç‰ˆ vs æ—§ç‰ˆè¡Œä¸º</h3><p>æ—§ç‰ˆ Chromeï¼ˆæˆ–è¾ƒè€çš„ JavaScript è¿è¡Œç¯å¢ƒï¼‰</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">str</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Hello ğŸ˜Š World</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">str</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">));</span>
<span class="c1">// æ—§ç‰ˆå¯èƒ½è¾“å‡ºï¼š"Hello ï¿½"</span>
</code></pre></div></div><p>æ—§ç‰ˆçš„é—®é¢˜ï¼š</p><ul><li><code class="language-plaintext highlighter-rouge">ğŸ˜Š</code> ç”±ä¸¤ä¸ª UTF-16 ç å…ƒ <code class="language-plaintext highlighter-rouge">\uD83D\uDE0A</code> ç»„æˆï¼Œ<code class="language-plaintext highlighter-rouge">slice(0, 8)</code> å¯èƒ½åªæˆªå–äº†ä¸€åŠï¼Œå¯¼è‡´ <code class="language-plaintext highlighter-rouge">ï¿½</code> ä¹±ç ã€‚</li></ul><p>æ–°ç‰ˆ Chrome</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">str</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Hello ğŸ˜Š World</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">str</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">));</span>
<span class="c1">// æ–°ç‰ˆå¯èƒ½æ­£ç¡®è¾“å‡ºï¼š"Hello ğŸ˜Š"</span>
</code></pre></div></div><p>æ–°ç‰ˆçš„ä¼˜åŒ–ï¼š</p><ul><li>Chrome æ”¹è¿›äº† <code class="language-plaintext highlighter-rouge">slice()</code>ï¼Œè®©å®ƒèƒ½è‡ªåŠ¨è¯†åˆ«å®Œæ•´çš„ Unicode å­—ç¬¦ï¼Œé¿å…äº†æˆªæ–­ä»£ç†å¯¹çš„é—®é¢˜ã€‚</li><li>è¿™æ„å‘³ç€ï¼Œåœ¨æ–°ç‰ˆ Chromeï¼ˆV8 å¼•æ“ï¼‰é‡Œï¼Œ<code class="language-plaintext highlighter-rouge">slice()</code> å’Œ <code class="language-plaintext highlighter-rouge">substring()</code> å¤§æ¦‚ç‡å·²ç»ä¸ä¼šæˆªæ–­ emojiã€‚</li></ul><p>è¦æ³¨æ„ï¼Œè¿™ç§ä¼˜åŒ–æ˜¯<strong>V8 å¼•æ“çš„ç‰¹æ€§ï¼Œä¸æ˜¯ ECMAScript è¯­è¨€æ ‡å‡†çš„ä¸€éƒ¨åˆ†</strong>ï¼Œå…¶ä»– JavaScript å¼•æ“ï¼ˆå¦‚ Safari çš„ JavaScriptCoreï¼‰å¯èƒ½ä»ç„¶ä¼šæœ‰é—®é¢˜ã€‚</p><p>å°½ç®¡æ–°ç‰ˆ V8 ä¼˜åŒ–äº† <code class="language-plaintext highlighter-rouge">slice()</code>ï¼Œä½†åœ¨ä¸åŒçš„æµè§ˆå™¨ã€Node.js ç‰ˆæœ¬æˆ–æ—§ç‰ˆ JavaScript å¼•æ“ï¼ˆå¦‚ Safariã€è€ç‰ˆæœ¬ Edgeï¼‰ä¸­ï¼Œ<code class="language-plaintext highlighter-rouge">slice()</code> å¯èƒ½ä»ç„¶ä¼šæˆªæ–­ emojiã€‚å› æ­¤ï¼Œæœ€ä¿é™©çš„æ–¹æ³•ä»ç„¶æ˜¯ï¼š</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">str</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Hello ğŸ˜Š World</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">truncatedStr</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">str</span><span class="p">).</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">truncatedStr</span><span class="p">);</span> <span class="c1">// "Hello ğŸ˜Š"</span>
</code></pre></div></div><p>å¦‚æœåªåœ¨ç°ä»£ Chrome è¿è¡Œï¼Œå¯ä»¥æ”¾å¿ƒç”¨ <code class="language-plaintext highlighter-rouge">slice()</code>ï¼Œä½†å¦‚æœä»£ç éœ€è¦å…¼å®¹æ—§ç‰ˆæµè§ˆå™¨æˆ– Node.js è¿è¡Œç¯å¢ƒï¼Œå»ºè®®ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">Array.from()</code> æ¥ç¡®ä¿ç¨³å®šæ€§ã€‚</p><div style="margin-top:2em;padding:0 1.5em;border:1px solid #d3d3d3;background-color:#deebf7"><h3>æ–‡æ¡£ä¿¡æ¯</h3><ul><li>æœ¬æ–‡ä½œè€…ï¼š<a href="" target="_blank">acteds</a></li><li>æœ¬æ–‡é“¾æ¥ï¼š<a href="/2025/03/13/%E6%AD%A3%E7%A1%AE%E6%88%AA%E6%96%AD%E5%AD%97%E7%AC%A6%E4%B8%B2/" target="_blank">https://acteds.github.io/2025/03/13/%E6%AD%A3%E7%A1%AE%E6%88%AA%E6%96%AD%E5%AD%97%E7%AC%A6%E4%B8%B2/</a></li><li>ç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²åï¼ˆ<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank">åˆ›æ„å…±äº«3.0è®¸å¯è¯</a>ï¼‰</li></ul></div></article><div class="share"></div><div class="comment"> <script src="https://beaudar.lipk.org/client.js" repo="mzlogin/blog-comments" issue-term="title" label="gitment" theme="github-light" comment-order="desc" input-position="top" crossorigin="anonymous" async> </script></div></div><div class="column one-fourth"><h3>Search</h3><div id="site_search"> <input style="width:96%" type="text" id="search_box" placeholder="Search"></div><ul id="search_results" style="font-size:14px;list-style-type:none;padding-top:10px;padding-left:10px;"></ul><script src="/assets/js/simple-jekyll-search.min.js"></script> <script type="text/javascript"> SimpleJekyllSearch({ searchInput: document.getElementById('search_box'), resultsContainer: document.getElementById('search_results'), json: '/assets/search_data.json?v=1743167898', searchResultTemplate: '<li><a href="{url}" title="{title}">{title}</a></li>', noResultsText: 'No results found', limit: 10, fuzzy: false, exclude: ['Welcome'] }) </script><h3 class="post-directory-title mobile-hidden">Table of Contents</h3><div id="post-directory-module" class="mobile-hidden"><section class="post-directory"><dl></dl></section></div><script src="/assets/js/jquery.toc.js"></script></div></div></section><footer class="container"><div class="site-footer" role="contentinfo"><div class="copyright left mobile-block"> Â© 2024 <span title="acteds">acteds</span> <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a></div><ul class="site-footer-links right mobile-hidden"><li> <a href="javascript:window.scrollTo(0,0)" >TOP</a></li></ul><a href="https://github.com/acteds/acteds.github.io" target="_blank" aria-label="view source code"> <span class="mega-octicon octicon-mark-github" title="GitHub"></span> </a><ul class="site-footer-links mobile-hidden"><li> <a href="/" title="é¦–é¡µ" target="">é¦–é¡µ</a></li><li> <a href="/categories/" title="åˆ†ç±»" target="">åˆ†ç±»</a></li><li> <a href="/wiki/" title="ç»´åŸº" target="">ç»´åŸº</a></li><li> <a href="/about/" title="å…³äº" target="">å…³äº</a></li><li><a href="/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></li></ul></div></footer><div class="tools-wrapper"> <a class="gotop" href="#" title="å›åˆ°é¡¶éƒ¨"><span class="octicon octicon-arrow-up"></span></a></div><script src="/assets/js/geopattern.js"></script> <script> jQuery(document).ready(function($) { $('.geopattern').each(function(){ $(this).geopattern($(this).data('pattern-id')); }); /* hljs.initHighlightingOnLoad(); */ }); </script></body></html>
